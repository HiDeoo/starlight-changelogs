---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro'
import { getVersionPath, type VersionsProps } from '../libs/routing'
import Entry from './Entry.astro'
import { getLink } from '../libs/link'
import { getChangelogTitle } from '../libs/title'

type Props = VersionsProps

const { changelog, entries, locale, pagination } = Astro.props

// TODO(HiDeoo) title
// TODO(HiDeoo) headings / h1
// TODO(HiDeoo) heading ID
---

<StarlightPage
  frontmatter={{ title: getChangelogTitle(changelog, locale), prev: pagination.prev, next: pagination.next }}
>
  {
    entries.map((entry) => (
      <>
        <h2>
          <a href={getLink(getVersionPath(entry, locale))}>{entry.data.title}</a>
        </h2>
        <Entry {entry} />
      </>
    ))
  }
</StarlightPage>
